{
  "hash": "c7f3e0ac76888accfbe7d976d75099f9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Introduction to Digital Humanities\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-tools: true\n    code-link: true\n    code-block-bg: \"#f8f8f8\"\n    code-block-border-left: \"#31BAE9\"\n    highlight-style: github\nexecute:\n  freeze: auto\n---\n\n\n\n\n## Slides\n<iframe src=\"../slides/s-intro.html\" width=\"100%\" height=\"500px\"></iframe>\n\n\n## Digital Humanities Analysis with R\n\nLet's explore some fascinating examples of how computational methods can be applied to humanities questions.\n\n### Example 1: Text Analysis of Literary Works\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(pacman)\np_load(tidyverse, tidytext, wordcloud, gutenbergr, scales, hrbrthemes)\n\n# Function to download and process text\n# gutenberg_works(title == \"The Age of Innocence\")\ninno <- gutenberg_download(541)\n\n# Analyze word frequencies\nword_freq <- inno %>%\n  unnest_tokens(word, text) %>%\n  anti_join(stop_words) %>%\n  count(word, sort = TRUE) %>%\n  top_n(20, n)\n\n# Create a bar plot of word frequencies\np <- ggplot(word_freq, aes(x = reorder(word, n), y = n)) +\n  geom_col(fill = \"#69b3a2\", width = 0.7) +\n  geom_text(aes(label = n), hjust = -0.3, size = 3) +\n  coord_flip() +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.1))) +\n  labs(x = NULL, y = \"Frequency\", \n       title = \"Top 20 Most Frequent Words in The Age of Innocence\",\n       subtitle = \"After removing common stop words\",\n       caption = \"Source: Project Gutenberg\") +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", margin = margin(b = 10)),\n    plot.subtitle = element_text(size = 12, color = \"gray50\", margin = margin(b = 20)),\n    plot.caption = element_text(size = 10, color = \"gray50\", margin = margin(t = 10)),\n    axis.text = element_text(size = 10),\n    axis.title = element_text(size = 12),\n    panel.grid.major.y = element_blank(),\n    panel.grid.minor = element_blank(),\n    plot.margin = margin(20, 20, 20, 20)\n  )\n\n# Print the plot\nprint(p)\n```\n\n::: {.cell-output-display}\n![](01-introduction_files/figure-html/literary-analysis-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\nThis word cloud visualizes the most frequent words in The Age of Innocence, giving us a quick insight into common themes and vocabulary.\n\n::: {.callout-tip collapse=\"true\"}\n## Discussion\n1. What words stand out to you in this visualization?\n2. How might this kind of analysis complement traditional close reading of literary works?\n3. What limitations might this approach have for understanding the author's language?\n:::\n\n### Example 2: Sentiment Analysis of Jane Austen's Novels\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(janeaustenr)\nlibrary(tidyverse)\nlibrary(tidytext)\nlibrary(hrbrthemes)\n\n# Combine Austen's novels\nausten_books <- austen_books() %>%\n  group_by(book) %>%\n  mutate(\n    linenumber = row_number(),\n    chapter = cumsum(str_detect(text, regex(\"^chapter [\\\\divxlc]\", ignore_case = TRUE)))\n  ) %>%\n  ungroup()\n\n# Perform sentiment analysis\nausten_sentiment <- austen_books %>%\n  unnest_tokens(word, text) %>%\n  inner_join(get_sentiments(\"bing\"), multiple=\"all\") %>%\n  count(book, index = linenumber %/% 100, sentiment) %>%\n  pivot_wider(names_from = sentiment, values_from = n, values_fill = 0) %>% \n  mutate(sentiment = positive - negative)\n\n# Plot sentiment over narrative time\nggplot(austen_sentiment, aes(index, sentiment, fill = book)) +\n  geom_col(show.legend = FALSE) +\n  facet_wrap(~book, ncol = 2, scales = \"free_x\") +\n  labs(\n    title = \"Sentiment Analysis of Jane Austen's Novels\",\n    subtitle = \"Emotional trajectory throughout the narrative\",\n    x = \"Narrative Time\",\n    y = \"Sentiment Score\",\n    caption = \"Data: janeaustenr package | Analysis: tidytext\"\n  ) +\n  theme_minimal() +\n  theme(\n    text = element_text(size = 12),\n    strip.text = element_text(size = 14, face = \"bold\"),\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(size = 18, face = \"bold\"),\n    plot.subtitle = element_text(size = 14, color = \"gray50\"),\n    plot.caption = element_text(size = 10, color = \"gray50\"),\n    axis.title = element_text(size = 12, face = \"bold\"),\n    plot.margin = margin(20, 20, 20, 20)\n  ) +\n  scale_fill_brewer(palette = \"Set2\") +\n  scale_y_continuous(expand = expansion(mult = c(0.1, 0.1)))\n```\n\n::: {.cell-output-display}\n![](01-introduction_files/figure-html/austen-sentiment-1.png){width=3600}\n:::\n\n```{.r .cell-code}\n# Display summary statistics\nausten_summary <- austen_sentiment %>%\n  group_by(book) %>%\n  summarize(\n    mean_sentiment = mean(sentiment),\n    max_sentiment = max(sentiment),\n    min_sentiment = min(sentiment)\n  )\n\nknitr::kable(austen_summary, caption = \"Summary Statistics of Sentiment Analysis\", digits = 2)\n```\n\n::: {.cell-output-display}\n\n\nTable: Summary Statistics of Sentiment Analysis\n\n|book                | mean_sentiment| max_sentiment| min_sentiment|\n|:-------------------|--------------:|-------------:|-------------:|\n|Sense & Sensibility |           9.94|            51|           -26|\n|Pride & Prejudice   |          10.69|            42|           -31|\n|Mansfield Park      |          12.47|            61|           -45|\n|Emma                |          14.40|            48|           -31|\n|Northanger Abbey    |           9.19|            47|           -33|\n|Persuasion          |          15.14|            59|           -13|\n\n\n:::\n:::\n\n\n\n\nThis visualization shows the emotional trajectory of Jane Austen's novels over their narrative time.\n\n::: {.callout-tip collapse=\"true\"}\n## Discussion: Narrative Emotions\n1. What patterns do you notice in the emotional arcs of Austen's novels?\n2. How might this type of analysis enhance our understanding of narrative structure?\n3. What challenges might arise in applying sentiment analysis to historical texts?\n:::\n\n### Example 3: Network Analysis of \"Empresses in the Palace\" Characters\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(pacman)\np_load(jsonlite,igraph,ggraph,tidyverse,showtext,ggrepel)\n\n# Add Noto Sans CJK font\nfont_add_google(\"Noto Sans SC\", \"Noto Sans SC\")\nshowtext_auto()\n\n\n# Read the JSON data\nrelation_data <- fromJSON(\"../book/data/relation.json\")\n\nrelation_data$nodes <- relation_data$nodes %>% rename(Bio=\"角色描述\")\n\n# Ensure that the 'source' and 'target' in edges match the 'ID' in nodes\nrelation_data$edges$source <- as.character(relation_data$edges$source)\nrelation_data$edges$target <- as.character(relation_data$edges$target)\nrelation_data$nodes$ID <- as.character(relation_data$nodes$ID)\nedges <- relation_data$edges %>% select(-Relationship)\n# Set the ID as the row names for the nodes dataframe\nrownames(relation_data$nodes) <- relation_data$nodes$ID\n\n# Create the directed graph\nempresses_graph <- graph_from_data_frame(d = edges,\n                                         vertices = relation_data$nodes$ID,\n                                         directed = TRUE)\n\n# Set node attributes\nV(empresses_graph)$Alliance <- relation_data$nodes$Alliance\nV(empresses_graph)$Label <- relation_data$nodes$Label\n\n# Create a color palette for alliances\nalliance_colors <- c(\n  \"皇室成员\" = \"#4E79A7\",  # Royal Blue\n  \"皇后阵营\" = \"#F28E2B\",  # Warm Orange\n  \"甄嬛阵营\" = \"#E15759\",  # Soft Red\n  \"华妃阵营\" = \"#76B7B2\"   # Teal\n)\n\n# Calculate node size based on total degree centrality (in + out)\nV(empresses_graph)$size <- degree(empresses_graph, mode = \"total\") * 0.5 + 3\nE(empresses_graph)$Relationship <- relation_data$edges$Relationship\n\n# Plot the network\nset.seed(123) # for reproducibility\nplot <- ggraph(empresses_graph, layout = \"fr\") +\n  geom_edge_link(aes(color=Relationship), arrow = arrow(length = unit(3, \"mm\")), end_cap = circle(2, \"mm\"), show.legend = TRUE,width=1) +\n  geom_node_point(aes(color = Alliance, size = size),show.legend=TRUE) +\n  geom_node_text(aes(label = Label), repel = TRUE, size = 6) +\n  scale_color_manual(values = alliance_colors, name = \"Alliance\") +\n  scale_size_continuous(range = c(5, 20), name = \"Connections\") +\n  theme_void() +\n  labs(title = \"Character Network in 'Empresses in the Palace'\",\n       subtitle = \"Directed relationships between key figures in the Chinese drama\") +\n  theme(\n    legend.position = \"none\",\n   # legend.box = \"vertical\",\n    plot.title = element_text(hjust = 0.5, size = 18, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5, size = 14)\n   # plot.caption = element_text(hjust = 1, size = 10)\n   # legend.text = element_text(size = 8),\n   # legend.title = element_text(size = 10, face = \"bold\")\n  ) \n# Display the plot\nprint(plot)\n```\n\n::: {.cell-output-display}\n![](01-introduction_files/figure-html/empresses-network-1.png){width=3600}\n:::\n\n```{.r .cell-code}\n# Display summary statistics\ncharacter_summary <- tibble(\n  Alliance = names(table(V(empresses_graph)$Alliance)),\n  Count = as.numeric(table(V(empresses_graph)$Alliance))\n)\n\nknitr::kable(character_summary, caption = \"Summary of Character Alliances\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Summary of Character Alliances\n\n|Alliance | Count|\n|:--------|-----:|\n|华妃阵营 |     6|\n|甄嬛阵营 |    22|\n|皇后阵容 |     7|\n|皇后阵营 |     5|\n|皇室成员 |     4|\n\n\n:::\n\n```{.r .cell-code}\n# Calculate and display top 5 characters by total degree centrality\ntop_characters <- tibble(\n  Character = V(empresses_graph)$Label,\n  InDegree = degree(empresses_graph, mode = \"in\"),\n  OutDegree = degree(empresses_graph, mode = \"out\"),\n  TotalDegree = degree(empresses_graph, mode = \"total\")\n) %>%\n  arrange(desc(TotalDegree)) %>%\n  left_join(.,relation_data$nodes%>%select(Label,Title,Alliance,Bio),by=(c(\"Character\"=\"Label\")))%>%\n  slice_head(n = 5)\n\nknitr::kable(top_characters, caption = \"Top 5 Characters by Total Connections\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Top 5 Characters by Total Connections\n\n|Character | InDegree| OutDegree| TotalDegree|Title      |Alliance |Bio                                                                                                                                                                                                                                                                                  |\n|:---------|--------:|---------:|-----------:|:----------|:--------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|甄嬛      |       16|        22|          38|皇贵妃     |甄嬛阵营 |因容貌酷似已逝的纯元皇后被选中，一直蒙受恩宠。对皇帝真心实意。因为在后宫算计中受到影响，一步步变得城府至深，结果却是她的一厢情愿，离开后宫，遇到了果郡王，心心相爱。后来设计回宫。经历了后宫无数的明争暗斗，勾心斗角，害死皇帝，扶养子登位，终于成为太后。                           |\n|雍正      |       13|        18|          31|皇上       |皇室成员 |九龙夺嫡之后终于登上了宝座。在他的眼中任何人都可以成为他巩固江山的棋子。纯元皇后去世多年，痴情的皇帝对她依然念念不忘，于是对酷似纯元皇后的甄嬛愈加宠爱，渐渐超过了华妃。甄嬛回宫，皇上对其极其信任，百依百顺。但最后还是被枕边人算计。                                               |\n|宜修      |        8|        11|          19|皇后       |皇后阵营 |纯元皇后的庶出妹妹。外表稳重端庄，但擅于隐忍，城府之深，极爱后位，后宫妃子皆为她的棋子。利用甄嬛打败了华妃，继而将甄嬛赶出宫外。甄嬛回宫后继续步步为营，但最后因害死纯元皇后的事情东窗事发，在太后的力保之下没被废后，但永生禁足于景仁宫，二人死生不复相见，最后新帝登基，心悸而死。 |\n|允礼      |        7|         7|          14|果亲王     |皇室成员 |果郡王不同于宫中争权夺势的皇室子弟，他庆幸自己并非帝王之身，不必将朝政琐事萦绕于身，他不求娇妻美妾如云，只盼与爱人厮守到老。果郡王爱着甄嬛，却又不能僭越宫廷之礼。他善良、痴情、风流倜傥，终其一生都是在寻求一份爱，奋不顾身地保护一份爱，说他是为爱而生也不为过。                   |\n|年世兰    |        6|         7|          13|正三品贵嫔 |华妃阵营 |大将军的妹妹，仗着身世和宠爱，对其他的妃嫔不择手段，但本性并不坏，因为孩子被打掉而痛恨端妃。甄嬛在其打入冷宫后还不能怀孕的事实告诉她，绝望的华妃撞墙而死。最终她被追封为敦肃皇贵妃。                                                                                                 |\n\n\n:::\n:::\n\n\n\n\nThis visualization shows the complex network of relationships between characters in the Chinese drama \"Empresses in the Palace\" (甄嬛传).\n\n::: {.callout-tip collapse=\"true\"}\n## Discussion: Character Networks in Historical Dramas\n1. What insights can we gain from this network visualization?\n2. Which characters appear to be central to the network? How might their positions reflect their importance in the narrative?\n3. How could this type of analysis complement traditional literary analysis of historical dramas or novels?\n4. What limitations might this network analysis have in representing the complex relationships and dynamics of the story?\n:::\n\n## Challenges and Considerations in Digital Humanities\n\n### Ethical Considerations\n\nDigital humanities projects often involve ethical considerations, particularly when working with sensitive or personal data.\n\n::: {.callout-warning}\nAlways consider privacy, consent, and potential harm when working with data about individuals or communities.\n:::\n\n### Interdisciplinary Collaboration\n\nDigital humanities often requires collaboration between humanists, computer scientists, librarians, and others.\n\n::: {.callout-tip collapse=\"true\"}\n## Discussion: Collaboration Challenges (10 minutes)\nIn small groups, discuss:\n\n1. What challenges might arise in collaborations between humanists and technologists?\n2. How can these challenges be addressed?\n\nShare your group's top insights with the class.\n:::\n\n### Critical Approaches\n\nIt's important to maintain critical perspectives on the use of digital tools in humanities research.\n\n::: {.callout-note}\nRemember that computational methods are not neutral. They embed certain assumptions and biases that need to be critically examined.\n:::\n\n## Conclusion\n\nThese demonstrations showcase just a few of the exciting possibilities that digital humanities offers for exploring and analyzing humanities data. By combining computational methods with traditional humanities scholarship, we can uncover new patterns, ask novel questions, and gain fresh insights into cultural and historical materials.\n\n::: {.callout-tip collapse=\"true\"}\n## Final Reflection\nConsider the examples we've explored today:\n\n1. Which technique (word frequency analysis, sentiment analysis, or network analysis) do you find most intriguing? Why?\n2. Can you think of a humanities question or topic from your own interests that might benefit from one of these computational approaches?\n\nShare your thoughts with a partner or the class if time allows.\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}