<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8" />
<meta name="generator" content="quarto-1.5.56" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />


<title>§6 Quantitative Text Analysis Basics 📊 – Intro to DH</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<!-- htmldependencies:E3FAD763 -->
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="../site_libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet" />
<script src="../site_libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="../site_libs/wordcloud2-0.0.1/hover.js"></script>
<script src="../site_libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>
<script src="quiz.js"></script>
<script src="content-switch.js"></script>


<link rel="stylesheet" href="../custom.css" />
</head>

<body>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="/index.html">
    <span class="navbar-title">Intro to DH</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
  aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation"
  onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="/index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="/syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="/toolbox.html"> 
<span class="menu-text">Toybox</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="/book/index.html"> 
<span class="menu-text">Book</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn"
      data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" 
      aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation"
      onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <h1 class="quarto-secondary-nav-title no-breadcrumbs"></h1>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" role="link"
        aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation"
        onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/book/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/book/01-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">§1 Introduction to Digital Humanities</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/book/02-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">§2 Getting Started With R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/book/03-dice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">§3 Rolling the Dice 🎲</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/book/04-cards.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">§4 Dealing With Cards 🃏</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/book/05-tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">§5 Spinning the Reels 🎰</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/book/06-qta.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">§6 Quantitative Text Analysis Basics 📊</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" ></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <div id="quarto-toc-target"></div>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">§6 Quantitative Text Analysis Basics 📊</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-is-quantitative-text-analysis" id="toc-what-is-quantitative-text-analysis"><span class="header-section-number">1</span> What is Quantitative Text Analysis? 🤔</a>
  <ul>
  <li><a href="#qta-in-digital-humanities" id="toc-qta-in-digital-humanities"><span class="header-section-number">1.1</span> QTA in Digital Humanities</a></li>
  <li><a href="#qta-workflow" id="toc-qta-workflow"><span class="header-section-number">1.2</span> QTA Workflow</a></li>
  </ul></li>
  <li><a href="#text-preprocessing-techniques" id="toc-text-preprocessing-techniques"><span class="header-section-number">2</span> Text Preprocessing Techniques 🧹</a>
  <ul>
  <li><a href="#understanding-regular-expressions" id="toc-understanding-regular-expressions"><span class="header-section-number">2.1</span> Understanding Regular Expressions</a></li>
  <li><a href="#learning-check" id="toc-learning-check"><span class="header-section-number">2.2</span> Learning Check 🏁</a></li>
  <li><a href="#tidy-structure" id="toc-tidy-structure"><span class="header-section-number">2.3</span> Tidy Structure</a></li>
  <li><a href="#learning-check-1" id="toc-learning-check-1"><span class="header-section-number">2.4</span> Learning Check 🏁</a></li>
  <li><a href="#hands-on-coding" id="toc-hands-on-coding"><span class="header-section-number">2.5</span> Hands-On Coding 💻</a>
  <ul>
  <li><a href="#exercise-1-lowercase-conversion" id="toc-exercise-1-lowercase-conversion"><span class="header-section-number">2.5.1</span> Exercise 1: Lowercase Conversion</a></li>
  <li><a href="#exercise-2-remove-punctuation" id="toc-exercise-2-remove-punctuation"><span class="header-section-number">2.5.2</span> Exercise 2: Remove Punctuation</a></li>
  <li><a href="#exercise-3-remove-extra-whitespace" id="toc-exercise-3-remove-extra-whitespace"><span class="header-section-number">2.5.3</span> Exercise 3: Remove Extra Whitespace</a></li>
  <li><a href="#exercise-4-remove-empty-entries" id="toc-exercise-4-remove-empty-entries"><span class="header-section-number">2.5.4</span> Exercise 4: Remove Empty Entries</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#basic-text-analysis-concepts" id="toc-basic-text-analysis-concepts"><span class="header-section-number">3</span> Basic Text Analysis Concepts 🔤</a>
  <ul>
  <li><a href="#tokenization" id="toc-tokenization"><span class="header-section-number">3.1</span> Tokenization</a>
  <ul>
  <li><a href="#word-tokenization" id="toc-word-tokenization"><span class="header-section-number">3.1.1</span> Word Tokenization</a></li>
  </ul></li>
  <li><a href="#stemming-and-lemmatization" id="toc-stemming-and-lemmatization"><span class="header-section-number">3.2</span> Stemming and Lemmatization</a>
  <ul>
  <li><a href="#stemming" id="toc-stemming"><span class="header-section-number">3.2.1</span> Stemming</a></li>
  <li><a href="#lemmatization" id="toc-lemmatization"><span class="header-section-number">3.2.2</span> Lemmatization</a></li>
  </ul></li>
  <li><a href="#n-grams" id="toc-n-grams"><span class="header-section-number">3.3</span> N-grams</a></li>
  <li><a href="#stopword-removal" id="toc-stopword-removal"><span class="header-section-number">3.4</span> Stopword Removal</a></li>
  <li><a href="#word-frequency-analysis" id="toc-word-frequency-analysis"><span class="header-section-number">3.5</span> Word Frequency Analysis</a></li>
  </ul></li>
  <li><a href="#visualizing-text-data" id="toc-visualizing-text-data"><span class="header-section-number">4</span> Visualizing Text Data 📊</a>
  <ul>
  <li><a href="#word-clouds" id="toc-word-clouds"><span class="header-section-number">4.1</span> Word Clouds</a></li>
  <li><a href="#bar-charts-of-word-frequency" id="toc-bar-charts-of-word-frequency"><span class="header-section-number">4.2</span> Bar Charts of Word Frequency</a></li>
  <li><a href="#learning-check-2" id="toc-learning-check-2"><span class="header-section-number">4.3</span> Learning Check 🏁</a></li>
  </ul></li>
  </ul>
</nav>
<p>Welcome to the world of quantitative text analysis! In this chapter, we’ll explore the fundamental concepts and techniques used to prepare text data for analysis. We’ll use a collection of classic novels as our dataset to demonstrate these concepts.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Learning Objectives
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ul>
<li>📖 Understand the basics of text analysis and its applications in Digital Humanities</li>
<li>🧹 Learn essential text preprocessing techniques</li>
<li>🔤 Explore basic text analysis concepts like tokenization and word frequency</li>
<li>📊 Visualize text data using simple techniques like word clouds</li>
</ul>
</div>
</div>
</div>
<section id="what-is-quantitative-text-analysis" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> What is Quantitative Text Analysis? 🤔</h1>
<p>Quantitative text analysis (QTA) is a method of analyzing large volumes of text data using computational techniques. It allows researchers to extract meaningful patterns, themes, and insights from textual data that would be difficult or impossible to analyze manually.</p>
<section id="qta-in-digital-humanities" class="level2" data-number="1.1">
<h2 data-number="1.1"><span class="header-section-number">1.1</span> QTA in Digital Humanities</h2>
<p>In Digital Humanities, QTA offers powerful tools for exploring large text corpora:</p>
<ol type="1">
<li><p><strong>Scale</strong>: Analyze vast collections of texts, revealing patterns across time periods, genres, or authors.</p></li>
<li><p><strong>Distant Reading</strong>: Observe broader patterns in literature and cultural production.</p></li>
<li><p><strong>Hypothesis Testing</strong>: Empirically test literary and cultural theories across large datasets.</p></li>
<li><p><strong>Discovery</strong>: Reveal unexpected patterns or connections, sparking new research questions.</p></li>
<li><p><strong>Interdisciplinary</strong>: Combine methods from linguistics, computer science, and statistics with humanistic inquiry.</p></li>
<li><p><strong>Visualization</strong>: Present textual data in new, visually interpretable ways.</p></li>
</ol>
<p>QTA complements traditional close reading, offering Digital Humanities scholars new perspectives on cultural, historical, and literary phenomena.</p>
</section>
<section id="qta-workflow" class="level2" data-number="1.2">
<h2 data-number="1.2"><span class="header-section-number">1.2</span> QTA Workflow</h2>
<p><img src="images/QTA%20workflow.png" class="img-fluid" /></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
QTA Workflow
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The Quantitative Text Analysis (QTA) workflow illustrates the systematic process of analyzing textual data using computational methods. This workflow can be divided into two main stages: Preprocessing Steps and Quantitative Text Analysis.</p>
<p><strong>Preprocessing Steps</strong>: This initial stage is crucial for preparing raw text data for analysis. It involves several operations:</p>
<ul>
<li><em>Tidy Structure</em>: Organizing the data into a consistent, clean format. Tidy format refers to one observation/value per row.</li>
<li><em>Lowercase Conversion</em>: Transforming all text to lowercase for uniformity.</li>
<li><em>Punctuation and/or Special Character Removal</em>: Eliminating punctuation marks and/or special characters that might interfere with analysis.</li>
<li><em>Numbers Removal</em>: Deleting numerical digits if they’re not relevant to the study.</li>
<li><em>Tokenization</em>: Breaking down the text into individual units (usually words).</li>
<li><em>Normalization</em>: Standardizing text to a more consistent form (e.g., handling special characters, expanding contractions).</li>
<li><em>Stopwords Removal</em>: Eliminating common words that typically don’t carry significant meaning.</li>
<li><em>Stemming/Lemmatization</em>: Reducing words to their root form to group similar words together.</li>
</ul>
<p><span class="highlight-blue">These steps are not always applied in a fixed order and may be selectively used depending on the specific requirements of the analysis.</span> The output of this stage is processed text ready for analysis.</p>
<p><strong>Quantitative Text Analysis</strong>:</p>
<p>This stage involves applying various analytical techniques to the preprocessed text. Some common methods include:</p>
<ul>
<li><em>Word Frequency Analysis</em>: Counting and analyzing the occurrence of words.</li>
<li><em>N-gram Analysis</em>: Examining sequences of N words to understand context and phrases.</li>
<li><em>Topic Modeling</em>: Discovering abstract topics that occur in a collection of documents.</li>
<li><em>Sentiment Analysis</em>: Determining the emotional tone behind a body of text.</li>
<li>And more…</li>
</ul>
<p>This workflow emphasizes the importance of proper text preprocessing before conducting any advanced analysis. It provides a framework for researchers to follow, ensuring that their textual data is appropriately prepared and analyzed using quantitative methods. The diagram’s structure, with its clear progression from preprocessing to analysis, highlights the sequential nature of the QTA process while also indicating the flexibility within each stage.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Install Package Manager <code>pacman</code>
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>We will be using some new packages that you probably haven’t installed. To streamline the process of package installation, let’s introduce a helpful tool for managing R packages: <code>pacman</code>. The <code>pacman</code> package is a convenient package management tool for R that simplifies the process of loading and installing multiple packages.</p>
<p>Key features of <code>pacman</code>:</p>
<ol type="1">
<li>It combines the functionality of <code>install.packages()</code> and <code>library()</code> into a single function <code>p_load()</code>.</li>
<li>It automatically installs packages if they’re not already installed.</li>
<li>It can load multiple packages with a single line of code.</li>
</ol>
<p>Let’s install <code>pacman</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&quot;pacman&quot;</span>)) <span class="fu">install.packages</span>(<span class="st">&quot;pacman&quot;</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: pacman</code></pre>
</div>
</div>
<p>Once we load the <code>pacman</code> library, we can use <code>p_load()</code> to efficiently load (and install if necessary) the packages we’ll need:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(tidyverse, tidytext)</span></code></pre></div>
</div>
<p>This single line will ensure all the packages we need are installed and loaded, streamlining our setup process.</p>
</div>
</div>
</div>
</section>
</section>
<section id="text-preprocessing-techniques" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Text Preprocessing Techniques 🧹</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Understanding Text Preprocessing
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Text preprocessing is the crucial first step in quantitative text analysis. It involves cleaning and standardizing raw text data to make it suitable for computational analysis.</p>
<p><strong>Why is it important?</strong></p>
<ul>
<li>Improves data quality and consistency</li>
<li>Reduces noise and irrelevant information</li>
<li>Enhances the accuracy of subsequent analyses</li>
<li>Makes text data more manageable for computational processing</li>
</ul>
<p><strong>Fundamental considerations:</strong></p>
<ol type="1">
<li><strong>Purpose</strong>: The preprocessing steps you choose should align with your research questions and analysis goals.</li>
<li><strong>Language</strong>: Different languages may require specific preprocessing techniques.</li>
<li><strong>Domain</strong>: The nature of your texts (e.g., literary, social media, historical) may influence preprocessing decisions.</li>
<li><strong>Information preservation</strong>: Be cautious not to remove potentially important information during preprocessing.</li>
<li><strong>Reproducibility</strong>: Document your preprocessing steps to ensure your analysis can be replicated.</li>
</ol>
<p>Remember, there’s no one-size-fits-all approach to preprocessing. The techniques you apply should be carefully considered based on your specific research context.</p>
</div>
</div>
</div>
<p>To showcase the various techniques for text preprocessing, let’s first create a mock dataset:</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>mock_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="fu">c</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;The Quick Brown Fox Jumps Over the Lazy Dog! Data Science meets Cultural Studies.&quot;</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Digital Humanities 101: An Introduction (2024); Exploring Big Data in Literature &amp; History&quot;</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;R Programming for Text Analysis - Chapter 3. Machine Learning for Textual Analysis&quot;</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;NLP techniques &amp; their applications in DH research; Computational Methods in Humanities Research?&quot;</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;20+ ways to visualize data: graphs, charts, and more! Digital Archives and Text Mining Techniques.&quot;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<p>Let’s take a closer look at our mock dataset:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mock_data)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  text                                                                          
  &lt;chr&gt;                                                                         
1 The Quick Brown Fox Jumps Over the Lazy Dog! Data Science meets Cultural Stud…
2 Digital Humanities 101: An Introduction (2024); Exploring Big Data in Literat…
3 R Programming for Text Analysis - Chapter 3. Machine Learning for Textual Ana…
4 NLP techniques &amp; their applications in DH research; Computational Methods in …
5 20+ ways to visualize data: graphs, charts, and more! Digital Archives and Te…</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Reflection 🤔
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Examine the mock dataset above and reflect on the following questions:</p>
<ul>
<li><p>What characteristics or elements do you notice that might need preprocessing for effective text analysis?</p></li>
<li><p>What challenges might these elements pose for text analysis? How might preprocessing help address these challenges?</p></li>
</ul>
</div>
</div>
</div>
<details>
<summary>
Click to Reveal Some Insights
</summary>
<ol type="1">
<li><p><strong>Capitalization</strong>: Words are inconsistently capitalized (e.g., “The Quick Brown Fox” vs. “Data Science”). This could lead to treating identical words as different entities.</p></li>
<li><p><strong>Punctuation</strong>: Various punctuation marks are present, including periods, exclamation marks, colons, and semicolons. These might interfere with word tokenization and analysis.</p></li>
<li><p><strong>Numbers</strong>: Some entries contain numbers (e.g., “101”, “2024”, “3”, “20+”). Depending on the analysis goals, these might need to be removed or treated specially.</p></li>
<li><p><strong>Special Characters</strong>: There are ampersands (&amp;) and hyphens (-) which might need special handling.</p></li>
<li><p><strong>Sentence Structure</strong>: Each row contains multiple sentences. For sentence-level analysis, we might need to split these.</p></li>
<li><p><strong>Abbreviations</strong>: “NLP” and “DH” are present. We might need to decide whether to expand these or treat them as single tokens.</p></li>
<li><p><strong>Stop Words</strong>: Common words like “the”, “and”, “for” are present. These might not contribute much meaning to the analysis.</p></li>
</ol>
<p>These observations highlight the need for various preprocessing steps, including: - Converting text to lowercase for consistency - Removing or standardizing punctuation - Handling numbers and special characters - Sentence tokenization - Word tokenization - Removing stop words</p>
By addressing these elements through preprocessing, we can prepare our text data for more effective and accurate analysis.
</details>
<section id="understanding-regular-expressions" class="level2" data-number="2.1">
<h2 data-number="2.1"><span class="header-section-number">2.1</span> Understanding Regular Expressions</h2>
<p>Before we dive into analyzing our mock data, let’s explore a powerful tool in text analysis: <strong>Regular Expressions</strong>.</p>
<p>Have you ever wondered how computer programs like Excel or Word can find the exact word or phrase you’re searching for? Or how they can replace all instances of a word throughout a document in just seconds? These everyday text operations are powered by a concept called <strong>pattern matching</strong>, and regular expressions take this idea to a whole new level.</p>
<p>In this section, we’ll introduce the basics of regular expressions, focusing on concepts and examples relevant to humanities research. We’ll start with simple patterns similar to what you might use in Excel, and gradually move to more powerful expressions. By the end, you’ll have a foundation that will help you better understand and implement the text preprocessing techniques we’ll use in our analysis.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
What are Regular Expressions?
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Regular Expressions, often called <strong>regex</strong>, are like a special language for describing patterns in text. Imagine you’re a librarian with a magical magnifying glass that can find not just specific words, but patterns in books.</p>
<section id="the-concept" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1"><span class="header-section-number">2.1.1</span> The Concept</h3>
<ol type="1">
<li><strong>Pattern Matching</strong>: Instead of searching for exact words, regex lets you search for patterns. For example, you could search for:
<ul>
<li>All words that start with “pre”</li>
<li>Any sequence of five letters</li>
<li>All dates in a specific format</li>
</ul></li>
<li><strong>Text Processing</strong>: Once you find these patterns, you can do things like:
<ul>
<li>Highlight them</li>
<li>Replace them with something else</li>
<li>Extract them for further study</li>
</ul></li>
</ol>
</section>
<section id="examples-of-regex" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2"><span class="header-section-number">2.1.2</span> Examples of Regex</h3>
<p>To give you a better idea of what regular expressions look like and how they work, let’s look at an example:</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(stringr)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample text</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="st">&quot;Jane Austen wrote Pride and Prejudice. Elizabeth Bennet is the protagonist.&quot;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Regex pattern for capitalized words</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>pattern <span class="ot">&lt;-</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">b[A-Z][a-z]+</span><span class="sc">\\</span><span class="st">b&quot;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Find all matches</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">str_extract_all</span>(text, pattern)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the matches</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(matches)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] &quot;Jane&quot;      &quot;Austen&quot;    &quot;Pride&quot;     &quot;Prejudice&quot; &quot;Elizabeth&quot; &quot;Bennet&quot;   </code></pre>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To see which words were matched in context</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(text, pattern)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] │ &lt;Jane&gt; &lt;Austen&gt; wrote &lt;Pride&gt; and &lt;Prejudice&gt;. &lt;Elizabeth&gt; &lt;Bennet&gt; is the protagonist.</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Regex breakdown
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Let’s break down the regex pattern <code>\\b[A-Z][a-z]+\\b</code>:</p>
<ol type="1">
<li><p><code>\\b</code>: This represents a word boundary. In R, we need to escape the backslash, so we use two. It ensures we’re matching whole words, not parts of words.</p></li>
<li><p><code>[A-Z]</code>: This character class matches any single uppercase letter from A to Z.</p></li>
<li><p><code>[a-z]+</code>: This matches one or more lowercase letters.</p>
<ul>
<li><code>[a-z]</code> is a character class that matches any single lowercase letter.</li>
<li>The <code>+</code> quantifier means “one or more” of the preceding element.</li>
</ul></li>
<li><p><code>\\b</code>: Another word boundary to end the match.</p></li>
</ol>
<p>So, this pattern matches: - Words that start with a capital letter (like names or the first word of a sentence) - Followed by one or more lowercase letters - As whole words, not parts of larger words</p>
<p>It won’t match: - ALL CAPS words - words with numbers or symbols - Single-letter capitalized words like “I” or “A”</p>
<p>This pattern is useful for finding proper nouns in the middle of sentences, like names of people or places.</p>
</div>
</div>
</div>
</section>
<section id="posix-character-classes-a-friendly-starting-point" class="level3" data-number="2.1.3">
<h3 data-number="2.1.3"><span class="header-section-number">2.1.3</span> POSIX Character Classes: A Friendly Starting Point</h3>
<p>You may find that regex can be quite hard to read for humans. POSIX character classes are pre-defined sets of characters that make regex more accessible and portable across different systems. They simplify regex patterns and address some common challenges in text processing:</p>
<ol type="1">
<li><p><strong>Simplification</strong>: POSIX classes provide easy-to-remember shorthand for common character groups. Instead of writing <code>[A-Za-z]</code> to match any letter, you can use <code>[:alpha:]</code>.</p></li>
<li><p><strong>Consistency</strong>: They ensure consistent behavior across different operating systems and programming languages. For example, <code>[A-Z]</code> might behave differently in some contexts depending on the locale settings, but <code>[:upper:]</code> is always consistent.</p></li>
<li><p><strong>Internationalization</strong>: POSIX classes can handle characters beyond the ASCII range, making them useful for working with texts in various languages.</p></li>
<li><p><strong>Readability</strong>: They make regex patterns more readable and self-explanatory, which is especially helpful when sharing code or working in teams.</p></li>
</ol>
<p>Here are some useful POSIX character classes:</p>
<ul>
<li><code>[:alpha:]</code>: Matches any alphabetic character (equivalent to <code>[A-Za-z]</code> in English texts)</li>
<li><code>[:digit:]</code>: Matches any digit (equivalent to <code>[0-9]</code>)</li>
<li><code>[:lower:]</code>: Matches any lowercase letter</li>
<li><code>[:upper:]</code>: Matches any uppercase letter</li>
<li><code>[:punct:]</code>: Matches any punctuation character</li>
<li><code>[:space:]</code>: Matches any whitespace character (spaces, tabs, newlines)</li>
</ul>
<p>By using these classes, you can create more robust and readable regex patterns. For example, instead of <code>[A-Za-z0-9]</code> to match any alphanumeric character, you could use <code>[[:alpha:][:digit:]]</code>, which is clearer in its intent and works across different language settings. ````</p>
</section>
<section id="examples-in-humanities-context" class="level3" data-number="2.1.4">
<h3 data-number="2.1.4"><span class="header-section-number">2.1.4</span> Examples in Humanities Context</h3>
<ol type="1">
<li>Finding capitalized words:
<ul>
<li>Pattern: <code>[[:upper:]][[:lower:]]+</code></li>
<li>This would match words like “Shakespeare”, “London”, “Renaissance”</li>
</ul></li>
<li>Identifying years:
<ul>
<li>Pattern: <code>[[:digit:]]{4}</code></li>
<li>This would match years like “1564”, “1616”, “2023”</li>
</ul></li>
<li>Locating punctuation:
<ul>
<li>Pattern: <code>[[:punct:]]</code></li>
<li>This would find all punctuation marks in a text</li>
</ul></li>
</ol>
<p>Remember, regex is a tool that becomes more useful as you practice. Start simple, and you’ll gradually be able to create more complex patterns for your research needs!</p>
</section>
</div>
</div>
</div>
</section>
<section id="learning-check" class="level2" data-number="2.2">
<h2 data-number="2.2"><span class="header-section-number">2.2</span> Learning Check 🏁</h2>
<div id="quiz-qta-intro">

</div>
<script>
createQuiz({
  questions: [
    {
      text: "What is the primary purpose of Quantitative Text Analysis (QTA)?",
      options: [
        "To translate texts into different languages",
        "To analyze large volumes of text data using computational techniques",
        "To improve the grammar and style of written texts",
        "To create new literary works using artificial intelligence"
      ]
    },
    {
      text: "Which of the following is NOT a benefit of QTA in Digital Humanities?",
      options: [
        "Analyzing vast collections of texts",
        "Observing broader patterns in literature",
        "Replacing close reading entirely",
        "Empirically testing literary theories"
      ]
    },
    {
      text: "In the QTA workflow, what is typically the first stage?",
      options: [
        "Topic Modeling",
        "Sentiment Analysis",
        "Preprocessing Steps",
        "Visualization"
      ]
    },
    {
      text: "What is the main purpose of regular expressions (regex) in text analysis?",
      options: [
        "To translate text between languages",
        "To find and match patterns in text",
        "To increase the font size of text",
        "To create new words in a language"
      ]
    },
    {
      text: "Which POSIX character class would you use to match any punctuation mark?",
      options: [
        "[:alpha:]",
        "[:digit:]",
        "[:lower:]",
        "[:punct:]"
      ]
    }
  ],
  answers: [1, 2, 2, 1, 3]
}, "quiz-qta-intro");
</script>
<p>Now let’s proceed to preprocess the mock dataset!</p>
</section>
<section id="tidy-structure" class="level2" data-number="2.3">
<h2 data-number="2.3"><span class="header-section-number">2.3</span> Tidy Structure</h2>
<p>The first step in our preprocessing pipeline is to ensure our data is in a tidy format, with one sentence per row. We’ll use <code>separate_rows()</code> with a regular expression (regex) pattern to achieve this:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>tidy_data <span class="ot">&lt;-</span> mock_data <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(text, <span class="at">sep =</span> <span class="st">&quot;(?&lt;=[.!?])</span><span class="sc">\\</span><span class="st">s+(?=[A-Z])&quot;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tidy_data)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 1
  text                                                                          
  &lt;chr&gt;                                                                         
1 The Quick Brown Fox Jumps Over the Lazy Dog!                                  
2 Data Science meets Cultural Studies.                                          
3 Digital Humanities 101: An Introduction (2024); Exploring Big Data in Literat…
4 R Programming for Text Analysis - Chapter 3.                                  
5 Machine Learning for Textual Analysis                                         
6 NLP techniques &amp; their applications in DH research; Computational Methods in …
7 20+ ways to visualize data: graphs, charts, and more!                         
8 Digital Archives and Text Mining Techniques.                                  </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Understanding <code>separate_rows()</code>
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ol type="1">
<li><code>separate_rows()</code> Function:
<ul>
<li>Part of the tidyr package in tidyverse</li>
<li>Separates a column into multiple rows based on a delimiter</li>
<li>Syntax: <code>separate_rows(data, column, sep = delimiter)</code></li>
</ul></li>
<li>Regular Expression (Regex) Pattern:
<ul>
<li><code>(?&lt;=[.!?])</code>: Positive lookbehind, matches a position after a period, exclamation mark, or question mark</li>
<li><code>\\s+</code>: Matches one or more whitespace characters</li>
<li><code>(?=[A-Z])</code>: Positive lookahead, matches a position before an uppercase letter</li>
<li>Combined, this pattern splits the text at sentence boundaries</li>
</ul></li>
<li>How it works:
<ul>
<li><code>separate_rows()</code> applies the regex pattern to split the ‘text’ column</li>
<li>Each resulting sentence becomes a new row in the dataframe</li>
<li>The original row’s other columns (if any) are duplicated for each new sentence row</li>
</ul></li>
</ol>
</div>
</div>
</div>
</section>
<section id="learning-check-1" class="level2" data-number="2.4">
<h2 data-number="2.4"><span class="header-section-number">2.4</span> Learning Check 🏁</h2>
<div id="quiz-qta">

</div>
<script>
createQuiz({
  questions: [
    {
      text: "What is the primary purpose of text preprocessing in quantitative text analysis?",
      options: [
        "To make the text more readable for humans",
        "To prepare the text for computational analysis",
        "To translate the text into different languages",
        "To increase the text's word count"
      ]
    },
    {
      text: "What does the `tolower()` function do in R?",
      options: [
        "Removes all lowercase letters",
        "Converts text to uppercase",
        "Converts text to lowercase",
        "Removes all uppercase letters"
      ]
    },
    {
      text: "In the context of regex, what does the pattern `[[:punct:]]` match?",
      options: [
        "All alphabetic characters",
        "All numeric characters",
        "All punctuation characters",
        "All whitespace characters"
      ]
    },
    {
      text: "What is the purpose of the `str_replace_all()` function in text preprocessing?",
      options: [
        "To count the occurrences of a pattern",
        "To extract specific patterns from text",
        "To replace all occurrences of a pattern with another string",
        "To split text into individual words"
      ]
    }
  ],
  answers: [1, 2, 2, 2]
}, "quiz-qta");
</script>
</section>
<section id="hands-on-coding" class="level2" data-number="2.5">
<h2 data-number="2.5"><span class="header-section-number">2.5</span> Hands-On Coding 💻</h2>
<p>Now, let’s apply our text preprocessing skills to a real dataset. We’ll use the answers submitted by you in response to the “what is digital humanities? write down three keywords that come to mind” question. Our goal is to clean and prepare this text data for analysis.</p>
<p>First, let’s download the dataset:</p>
<p><a href="data/dh_keywords.csv">Download DH Keywords dataset</a></p>
<p>Save it in the folder name <code>data</code> in your working directory.</p>
<p>We can then load the csv file into RStudio:</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(tidyverse)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the dataset</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>dh_keywords <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/dh_keywords.csv&quot;</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 180 Columns: 1
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (1): X1

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dh_keywords) <span class="ot">&lt;-</span> <span class="st">&quot;keyword&quot;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dh_keywords)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  keyword
  &lt;chr&gt;  
1 math   
2 chatgpt
3 AI     
4 ai     
5 AI     
6 ai     </code></pre>
</div>
</div>
<section id="exercise-1-lowercase-conversion" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1"><span class="header-section-number">2.5.1</span> Exercise 1: Lowercase Conversion</h3>
<p>Convert all keywords to lowercase.</p>
<div id="hint-preprocess1-1" style="display: none;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Hint
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Use the <code>mutate()</code> function with <code>tolower()</code> to convert the text to lowercase.</p>
</div>
</div>
</div>
</div>
<script>
createProgressiveHints('hint-preprocess1', 1);
</script>
<div id="template-preprocess1" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dh_keywords_lower <span class="ot">&lt;-</span> dh_keywords <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keyword =</span> <span class="fu">_</span>(keyword))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dh_keywords_lower)</span></code></pre></div>
</div>
</div>
<script>
createToggleSection('template-button-preprocess1', 'template-preprocess1', 'Show Template');
</script>
<div id="solution-preprocess1" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dh_keywords_lower <span class="ot">&lt;-</span> dh_keywords <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keyword =</span> <span class="fu">tolower</span>(keyword))</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dh_keywords_lower)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  keyword
  &lt;chr&gt;  
1 math   
2 chatgpt
3 ai     
4 ai     
5 ai     
6 ai     </code></pre>
</div>
</div>
</div>
<script>
createToggleSection('solution-button-preprocess1', 'solution-preprocess1');
</script>
</section>
<section id="exercise-2-remove-punctuation" class="level3" data-number="2.5.2">
<h3 data-number="2.5.2"><span class="header-section-number">2.5.2</span> Exercise 2: Remove Punctuation</h3>
<p>Remove all punctuation from the keywords.</p>
<div id="hint-preprocess2-1" style="display: none;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Hint
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Use <code>str_replace_all()</code> with a regular expression to remove punctuation.</p>
</div>
</div>
</div>
</div>
<script>
createProgressiveHints('hint-preprocess2', 1);
</script>
<div id="template-preprocess2" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dh_keywords_clean <span class="ot">&lt;-</span> dh_keywords_lower <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keyword =</span> <span class="fu">str_replace_all</span>(keyword, _, <span class="st">&quot;&quot;</span>))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dh_keywords_clean)</span></code></pre></div>
</div>
</div>
<script>
createToggleSection('template-button-preprocess2', 'template-preprocess2', 'Show Template');
</script>
<div id="solution-preprocess2" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>dh_keywords_clean <span class="ot">&lt;-</span> dh_keywords_lower <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keyword =</span> <span class="fu">str_replace_all</span>(keyword, <span class="st">&quot;[[:punct:]]&quot;</span>, <span class="st">&quot;&quot;</span>))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dh_keywords_clean)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  keyword
  &lt;chr&gt;  
1 math   
2 chatgpt
3 ai     
4 ai     
5 ai     
6 ai     </code></pre>
</div>
</div>
</div>
<script>
createToggleSection('solution-button-preprocess2', 'solution-preprocess2');
</script>
</section>
<section id="exercise-3-remove-extra-whitespace" class="level3" data-number="2.5.3">
<h3 data-number="2.5.3"><span class="header-section-number">2.5.3</span> Exercise 3: Remove Extra Whitespace</h3>
<p>Remove any leading, trailing, or extra whitespace from the keywords.</p>
<div id="hint-preprocess3-1" style="display: none;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Hint
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Use <code>str_trim()</code> to remove leading and trailing whitespace, and <code>str_squish()</code> to replace multiple spaces with a single space.</p>
</div>
</div>
</div>
</div>
<script>
createProgressiveHints('hint-preprocess3', 1);
</script>
<div id="template-preprocess3" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dh_keywords_trimmed <span class="ot">&lt;-</span> dh_keywords_clean <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keyword =</span> <span class="fu">str_trim</span>(<span class="fu">_</span>(_)))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dh_keywords_trimmed)</span></code></pre></div>
</div>
</div>
<script>
createToggleSection('template-button-preprocess3', 'template-preprocess3', 'Show Template');
</script>
<div id="solution-preprocess3" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>dh_keywords_trimmed <span class="ot">&lt;-</span> dh_keywords_clean <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keyword =</span> <span class="fu">str_trim</span>(<span class="fu">str_squish</span>(keyword)))</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dh_keywords_trimmed)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  keyword
  &lt;chr&gt;  
1 math   
2 chatgpt
3 ai     
4 ai     
5 ai     
6 ai     </code></pre>
</div>
</div>
</div>
<script>
createToggleSection('solution-button-preprocess3', 'solution-preprocess3');
</script>
</section>
<section id="exercise-4-remove-empty-entries" class="level3" data-number="2.5.4">
<h3 data-number="2.5.4"><span class="header-section-number">2.5.4</span> Exercise 4: Remove Empty Entries</h3>
<p>Remove any rows that are empty after our preprocessing steps.</p>
<div id="hint-preprocess4-1" style="display: none;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Hint
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Use <code>filter()</code> with <code>nchar()</code> to keep only non-empty entries.</p>
</div>
</div>
</div>
</div>
<script>
createProgressiveHints('hint-preprocess4', 1);
</script>
<div id="template-preprocess4" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>dh_keywords_final <span class="ot">&lt;-</span> dh_keywords_trimmed <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">_</span>(keyword) <span class="sc">&gt;</span> _)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the final result and the number of rows</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(dh_keywords_final)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;Number of keywords after preprocessing:&quot;</span>, <span class="fu">nrow</span>(dh_keywords_final))</span></code></pre></div>
</div>
</div>
<script>
createToggleSection('template-button-preprocess4', 'template-preprocess4', 'Show Template');
</script>
<div id="solution-preprocess4" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>dh_keywords_final <span class="ot">&lt;-</span> dh_keywords_trimmed <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">nchar</span>(keyword) <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the final result and the number of rows</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(dh_keywords_final)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 1
   keyword
   &lt;chr&gt;  
 1 math   
 2 chatgpt
 3 ai     
 4 ai     
 5 ai     
 6 ai     
 7 coding 
 8 ai     
 9 ai     
10 data   
# ℹ 170 more rows</code></pre>
</div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;Number of keywords after preprocessing:&quot;</span>, <span class="fu">nrow</span>(dh_keywords_final))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;Number of keywords after preprocessing: 180&quot;</code></pre>
</div>
</div>
<p>Combined version of all the preprocessing steps:</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>dh_keywords_final <span class="ot">&lt;-</span> dh_keywords <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keyword =</span> <span class="fu">tolower</span>(keyword),</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">keyword =</span> <span class="fu">str_replace_all</span>(keyword, <span class="st">&quot;[[:punct:]]&quot;</span>, <span class="st">&quot;&quot;</span>),</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">keyword =</span> <span class="fu">str_trim</span>(<span class="fu">str_squish</span>(keyword))) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">nchar</span>(keyword) <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code></pre></div>
</div>
</div>
<script>
createToggleSection('solution-button-preprocess4', 'solution-preprocess4');
</script>
<p>Congratulations! You’ve successfully preprocessed the DH keywords dataset. These clean keywords are now ready for further analysis, such as frequency counting, visualization, or more advanced text analysis techniques.</p>
</section>
</section>
</section>
<section id="basic-text-analysis-concepts" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Basic Text Analysis Concepts 🔤</h1>
<p>In this section, we’ll explore fundamental concepts in text analysis that form the building blocks for more advanced techniques. These concepts are crucial for understanding how we can extract meaningful insights from textual data.</p>
<section id="tokenization" class="level2" data-number="3.1">
<h2 data-number="3.1"><span class="header-section-number">3.1</span> Tokenization</h2>
<p>Tokenization is a foundational step in text analysis, involving the process of breaking down text into smaller, meaningful units called tokens. These tokens can be words, phrases, or even sentences, depending on the level of analysis you’re performing.</p>
<section id="word-tokenization" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1"><span class="header-section-number">3.1.1</span> Word Tokenization</h3>
<p>Word tokenization is the most common form of tokenization, where text is split into individual words. This process allows us to analyze text at its most granular level. Let’s use our preprocessed DH keywords dataset to demonstrate:</p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(tidytext, tidyverse)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>word_tokens <span class="ot">&lt;-</span> dh_keywords_final <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, keyword)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few tokens</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>word_tokens <span class="sc">%&gt;%</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
   word   
   &lt;chr&gt;  
 1 math   
 2 chatgpt
 3 ai     
 4 ai     
 5 ai     
 6 ai     
 7 coding 
 8 ai     
 9 ai     
10 data   </code></pre>
</div>
</div>
<p>:: {.callout-tip} ## The <code>unnest_tokens()</code> function The <code>unnest_tokens()</code> function from the tidytext package is particularly useful because it integrates seamlessly with the tidyverse ecosystem. It splits the text into tokens and transforms the data into a one-token-per-row format, which is ideal for further analysis using dplyr, ggplot2, and other tidy tools. :::</p>
<p>In this example, our keywords are already individual words, so the tokenization might not show a significant difference. However, for longer texts like novels or articles, this process would break down sentences into individual words, allowing for more detailed analysis.</p>
</section>
</section>
<section id="stemming-and-lemmatization" class="level2" data-number="3.2">
<h2 data-number="3.2"><span class="header-section-number">3.2</span> Stemming and Lemmatization</h2>
<p>Stemming and lemmatization are techniques used to reduce words to their base or root form. This process is crucial for grouping similar words together and reducing the vocabulary size, which can improve the efficiency and effectiveness of text analysis.</p>
<section id="stemming" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1"><span class="header-section-number">3.2.1</span> Stemming</h3>
<p>Stemming is a simple, rule-based approach to reduce words to their stem or root form. It typically involves removing the ends of words, which can sometimes result in stems that are not actual words.</p>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(SnowballC)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>stemmed_words <span class="ot">&lt;-</span> word_tokens <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stem =</span> <span class="fu">wordStem</span>(word))</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Display a few examples</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>stemmed_words <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(word, stem) <span class="sc">%&gt;%</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   word          stem   
   &lt;chr&gt;         &lt;chr&gt;  
 1 math          math   
 2 chatgpt       chatgpt
 3 ai            ai     
 4 coding        code   
 5 data          data   
 6 plus          plu    
 7 humanbeing    humanb 
 8 social        social 
 9 media         media  
10 informational inform </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
The <code>wordStem()</code> function
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The <code>wordStem()</code> function from the SnowballC package implements the Porter stemming algorithm, which is widely used in text processing. While stemming is fast and easy to implement, it can sometimes produce stems that are not real words, which might be confusing in some contexts.</p>
</div>
</div>
</div>
</section>
<section id="lemmatization" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2"><span class="header-section-number">3.2.2</span> Lemmatization</h3>
<p>Lemmatization is a more sophisticated approach that considers the context and part of speech of a word to determine its base form or lemma. Unlike stemming, lemmatization always produces real words.</p>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(textstem)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>lemmatized_words <span class="ot">&lt;-</span> word_tokens <span class="sc">%&gt;%</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lemma =</span> <span class="fu">lemmatize_words</span>(word))</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Display a few examples</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>lemmatized_words <span class="sc">%&gt;%</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(word, lemma) <span class="sc">%&gt;%</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   word          lemma        
   &lt;chr&gt;         &lt;chr&gt;        
 1 math          math         
 2 chatgpt       chatgpt      
 3 ai            ai           
 4 coding        code         
 5 data          datum        
 6 plus          plus         
 7 humanbeing    humanbeing   
 8 social        social       
 9 media         medium       
10 informational informational</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
The <code>lemmatize_words()</code> function
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The <code>lemmatize_words()</code> function from the textstem package uses a dictionary-based approach to find the lemma of each word. Lemmatization is generally more accurate than stemming but can be slower and more computationally intensive.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
How to Choose Between Stemming and Lemmatization?
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Choosing between stemming and lemmatization depends on your specific needs, resources, and the nature of your text analysis project:</p>
<ol type="1">
<li><p><strong>Speed vs. Accuracy</strong>:</p>
<ul>
<li>Stemming is faster but can produce non-words or incorrect roots.</li>
<li>Lemmatization is slower but more accurate, always producing real words.</li>
</ul></li>
<li><p><strong>Language Complexity</strong>:</p>
<ul>
<li>For languages with simple morphology (like English), stemming might suffice.</li>
<li>For languages with complex morphology (like German or Arabic), lemmatization is often preferred.</li>
<li>For languages without clear word boundaries (like Chinese or Japanese):
<ul>
<li>Neither traditional stemming nor lemmatization applies directly.</li>
<li>Word segmentation is a crucial first step.</li>
<li>After segmentation, techniques similar to lemmatization may be used to normalize words.</li>
</ul></li>
</ul></li>
<li><p><strong>Domain Specificity</strong>:</p>
<ul>
<li>In specialized fields (e.g., medical texts), lemmatization’s accuracy can be crucial because it preserves the precise meanings of complex, domain-specific terms that might be lost or conflated through simpler stemming methods.</li>
<li>For general-purpose analysis, stemming’s speed might be more valuable.</li>
</ul></li>
<li><p><strong>Available Resources</strong>:</p>
<ul>
<li>Stemming requires less computational power and no additional linguistic resources.</li>
<li>Lemmatization often needs dictionaries and more processing power.</li>
</ul></li>
<li><p><strong>Project Goals</strong>:</p>
<ul>
<li>For quick, exploratory analysis, stemming can be sufficient.</li>
<li>For in-depth linguistic analysis or when meaning preservation is crucial, use lemmatization.</li>
</ul></li>
<li><p><strong>Text Quality</strong>:</p>
<ul>
<li>For well-edited texts, both methods work well.</li>
<li>For informal texts (e.g., social media), stemming might handle variations and misspellings better.</li>
</ul></li>
<li><p><strong>Interpretability</strong>:</p>
<ul>
<li>Stemmed words can be harder for humans to interpret.</li>
<li>Lemmatized words are always real words, making results more readable.</li>
</ul></li>
</ol>
<p>In practice, many researchers try both methods and compare results. For humanities projects, especially those involving literary analysis or historical texts, lemmatization often provides more meaningful and interpretable results, despite the additional computational cost.</p>
</div>
</div>
</div>
</section>
</section>
<section id="n-grams" class="level2" data-number="3.3">
<h2 data-number="3.3"><span class="header-section-number">3.3</span> N-grams</h2>
<p>N-grams are contiguous sequences of n items from a given text. These items can be words, characters, or even syllables. N-grams help capture phrases and word associations, providing context that single words might miss.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Understanding N-grams
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ul>
<li>Unigrams (n=1): Single words, e.g., “digital”, “humanities”</li>
<li>Bigrams (n=2): Two consecutive words, e.g., “digital humanities”</li>
<li>Trigrams (n=3): Three consecutive words, e.g., “natural language processing”</li>
<li>And so on for larger n…</li>
</ul>
<p>N-grams preserve word order, which can be crucial for understanding meaning and context in text analysis.</p>
</div>
</div>
</div>
<p>Let’s create bigrams from our original (non-preprocessed) DH keywords dataset:</p>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>bigrams <span class="ot">&lt;-</span> dh_keywords <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(bigram, keyword, <span class="at">token =</span> <span class="st">&quot;ngrams&quot;</span>, <span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the most common bigrams</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>bigrams <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(bigram, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   bigram               n
   &lt;chr&gt;            &lt;int&gt;
 1 &lt;NA&gt;                67
 2 ai coding            6
 3 coding data          6
 4 data ai              6
 5 data coding          6
 6 computer science     5
 7 data analysis        5
 8 ai data              4
 9 social science       4
10 analysis coding      3</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Why use bigrams?
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Bigrams can reveal common phrases and word pairs in the text that single words miss. For instance, “digital humanities” carries more specific meaning than “digital” and “humanities” separately. In literary analysis, bigrams like “stream consciousness” might indicate modernist writing techniques.</p>
</div>
</div>
</div>
<p>N-grams are particularly useful for:</p>
<ol type="1">
<li><strong>Phrase Detection</strong>: Identifying common expressions or technical terms.</li>
<li><strong>Contextual Analysis</strong>: Understanding how words are used in context.</li>
<li><strong>Language Modeling</strong>: Predicting the next word based on previous words.</li>
<li><strong>Stylometric Analysis</strong>: Studying an author’s writing style.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Considering Multiple N-gram Sizes
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Researchers often use a combination of n-gram sizes (e.g., unigrams, bigrams, and trigrams) for several reasons:</p>
<ol type="1">
<li><strong>Comprehensive Coverage</strong>: Different n-gram sizes capture different aspects of language.</li>
<li><strong>Balancing Specificity and Generality</strong>: Larger n-grams are more specific but occur less frequently.</li>
<li><strong>Handling Varied Phrases</strong>: Some meaningful phrases are two words, others three or more.</li>
</ol>
<p>However, using multiple n-gram sizes also has challenges: - <strong>Increased Complexity</strong>: More data to process and analyze. - <strong>Overlapping Information</strong>: Bigrams and trigrams may contain redundant information. - <strong>Sparse Data</strong>: Larger n-grams may occur very infrequently, leading to sparse data issues.</p>
<p>The choice depends on your research questions and the nature of your texts.</p>
</div>
</div>
</div>
<p>Here’s an example of how we might generate n-grams of different sizes:</p>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to generate n-grams</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>generate_ngrams <span class="ot">&lt;-</span> <span class="cf">function</span>(data, n) {</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unnest_tokens</span>(ngram, keyword, <span class="at">token =</span> <span class="st">&quot;ngrams&quot;</span>, <span class="at">n =</span> n) <span class="sc">%&gt;%</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(ngram, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">n =</span> n)</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate unigrams, bigrams, and trigrams</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>unigrams <span class="ot">&lt;-</span> <span class="fu">generate_ngrams</span>(dh_keywords, <span class="dv">1</span>)</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>bigrams <span class="ot">&lt;-</span> <span class="fu">generate_ngrams</span>(dh_keywords, <span class="dv">2</span>)</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>trigrams <span class="ot">&lt;-</span> <span class="fu">generate_ngrams</span>(dh_keywords, <span class="dv">3</span>)</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the results</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>all_ngrams <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(unigrams, bigrams, trigrams)</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the top 5 of each</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>all_ngrams <span class="sc">%&gt;%</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(n) <span class="sc">%&gt;%</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(n, <span class="fu">desc</span>(nn))</span></code></pre></div>
</div>
<p>This approach allows us to see the most common phrases of different lengths in our dataset, providing a more comprehensive view of the language used in digital humanities keywords.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Preprocessing Considerations
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>When working with n-grams, it’s often better to use non-preprocessed text:</p>
<ol type="1">
<li>Punctuation and capitalization can be meaningful for phrase detection.</li>
<li>Stopwords might be important parts of meaningful phrases.</li>
<li>Word order matters, so stemming or lemmatization might obscure important distinctions.</li>
</ol>
<p>Preprocessing can be applied after n-gram generation if needed, but this allows for more nuanced analysis of phrases and expressions.</p>
</div>
</div>
</div>
<p>By considering different n-gram sizes and using non-preprocessed text, we can gain richer insights into the language patterns and meaningful phrases in our digital humanities corpus.</p>
</section>
<section id="stopword-removal" class="level2" data-number="3.4">
<h2 data-number="3.4"><span class="header-section-number">3.4</span> Stopword Removal</h2>
<p>Stopwords are common words (like “the”, “is”, “at”) that are often removed from text analysis because they typically don’t carry much meaning on their own. Removing stopwords can help focus the analysis on more meaningful content words.</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(tidytext)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(stop_words)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>words_without_stopwords <span class="ot">&lt;-</span> word_tokens <span class="sc">%&gt;%</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(word)`</code></pre>
</div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare word counts before and after stopword removal</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;Words before stopword removal:&quot;</span>, <span class="fu">nrow</span>(word_tokens))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;Words before stopword removal: 393&quot;</code></pre>
</div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;Words after stopword removal:&quot;</span>, <span class="fu">nrow</span>(words_without_stopwords))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;Words after stopword removal: 374&quot;</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
The <code>anti_join()</code> function
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The <code>anti_join()</code> function is used here to remove stopwords from our dataset. It keeps only the rows from the first dataset (word_tokens) that do not have a match in the second dataset (stop_words). This effectively removes all the stopwords from our text data.</p>
</div>
</div>
</div>
</section>
<section id="word-frequency-analysis" class="level2" data-number="3.5">
<h2 data-number="3.5"><span class="header-section-number">3.5</span> Word Frequency Analysis</h2>
<p>Word frequency analysis involves counting how often each word appears in a text. This can give us insights into the most important or prevalent themes in the text.</p>
<div class="cell">
<div class="sourceCode" id="cb47"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>word_frequencies <span class="ot">&lt;-</span> words_without_stopwords <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the top 10 most frequent words</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>word_frequencies <span class="sc">%&gt;%</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   word            n
   &lt;chr&gt;       &lt;int&gt;
 1 data           53
 2 ai             39
 3 coding         31
 4 analysis       18
 5 technology     17
 6 science        13
 7 computer       12
 8 statistics      8
 9 programming     7
10 digital         5</code></pre>
</div>
</div>
</section>
</section>
<section id="visualizing-text-data" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Visualizing Text Data 📊</h1>
<section id="word-clouds" class="level2" data-number="4.1">
<h2 data-number="4.1"><span class="header-section-number">4.1</span> Word Clouds</h2>
<p>Word clouds are a popular way to visualize the most frequent words in a text, with the size of each word proportional to its frequency.</p>
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(wordcloud2)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a word cloud</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud2</span>(<span class="at">data =</span> word_frequencies <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">50</span>), <span class="at">size =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="wordcloud2 html-widget html-fill-item" id="htmlwidget-d0fb6cc5b98c385f9b0e" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d0fb6cc5b98c385f9b0e">{"x":{"word":["data","ai","coding","analysis","technology","science","computer","statistics","programming","digital","ethics","chatgpt","code","human","research","tools","artificial","culture","humanities","interdisciplinary","quantitative","social","society","text","complicated","corpus","creativity","difficult","humanity","innovative","intelligence","linguistics","multimedia","network","processing","program","programing","video","abstract","advanced","aicoding","aidata","aidatatext","aiit","aiprogramingdata","aiprogramming","analysing","analytical","applying","auxiliary"],"freq":[53,39,31,18,17,13,12,8,7,5,5,4,4,4,4,4,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1],"fontFamily":"Segoe UI","fontWeight":"bold","color":"random-dark","minSize":0,"weightFactor":1.69811320754717,"backgroundColor":"white","gridSize":0,"minRotation":-0.7853981633974483,"maxRotation":0.7853981633974483,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make it more aesthetically pleasing</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(RColorBrewer)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a color palette</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>color_palette <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">&quot;Dark2&quot;</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud2</span>(</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> word_frequencies <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">50</span>),  <span class="co"># Use top 50 most frequent words</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">size =</span> <span class="fl">0.6</span>,                    <span class="co"># Increase text size for better readability</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="fu">rep_len</span>(color_palette, <span class="dv">50</span>),  <span class="co"># Apply color palette to words</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">backgroundColor =</span> <span class="st">&quot;white&quot;</span>,     <span class="co"># Set background color to white</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">rotateRatio =</span> <span class="fl">0.3</span>,             <span class="co"># Reduce word rotation for cleaner look</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">shape =</span> <span class="st">&quot;circle&quot;</span>,              <span class="co"># Set overall shape of the word cloud</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">fontFamily =</span> <span class="st">&quot;Arial&quot;</span>,          <span class="co"># Use Arial font for consistency</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">fontWeight =</span> <span class="st">&quot;bold&quot;</span>,           <span class="co"># Make text bold for emphasis</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">minRotation =</span> <span class="sc">-</span>pi<span class="sc">/</span><span class="dv">6</span>,           <span class="co"># Set minimum rotation angle (30 degrees left)</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">maxRotation =</span> pi<span class="sc">/</span><span class="dv">6</span>             <span class="co"># Set maximum rotation angle (30 degrees right)</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="cell-output-display">
<div class="wordcloud2 html-widget html-fill-item" id="htmlwidget-92f1053e576f99270879" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-92f1053e576f99270879">{"x":{"word":["data","ai","coding","analysis","technology","science","computer","statistics","programming","digital","ethics","chatgpt","code","human","research","tools","artificial","culture","humanities","interdisciplinary","quantitative","social","society","text","complicated","corpus","creativity","difficult","humanity","innovative","intelligence","linguistics","multimedia","network","processing","program","programing","video","abstract","advanced","aicoding","aidata","aidatatext","aiit","aiprogramingdata","aiprogramming","analysing","analytical","applying","auxiliary"],"freq":[53,39,31,18,17,13,12,8,7,5,5,4,4,4,4,4,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1],"fontFamily":"Arial","fontWeight":"bold","color":["#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666","#1B9E77","#D95F02"],"minSize":0,"weightFactor":2.037735849056604,"backgroundColor":"white","gridSize":0,"minRotation":-0.5235987755982988,"maxRotation":0.5235987755982988,"shuffle":true,"rotateRatio":0.3,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
</div>
</section>
<section id="bar-charts-of-word-frequency" class="level2" data-number="4.2">
<h2 data-number="4.2"><span class="header-section-number">4.2</span> Bar Charts of Word Frequency</h2>
<p>Bar charts offer a more precise way to visualize word frequencies, especially for comparing the most common words.</p>
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(ggplot2)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>word_frequencies <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(word, n), <span class="at">y =</span> n, <span class="at">fill =</span> <span class="fu">desc</span>(n))) <span class="sc">+</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Word&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Top 10 Most Frequent DH Keywords&quot;</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="06-qta_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
</section>
<section id="learning-check-2" class="level2" data-number="4.3">
<h2 data-number="4.3"><span class="header-section-number">4.3</span> Learning Check 🏁</h2>
<div id="quiz-text-analysis">

</div>
<script>
createQuiz({
  questions: [
    {
      text: "What is tokenization in text analysis?",
      options: [
        "The process of removing punctuation from text",
        "Breaking down text into smaller units like words or sentences",
        "Converting all text to lowercase",
        "Removing common words from text"
      ]
    },
    {
      text: "What are stopwords in text analysis?",
      options: [
        "Words that appear most frequently in a text",
        "Words that are misspelled in a text",
        "Common words like 'the', 'is', 'at' that are often removed from analysis",
        "Words that are unique to a specific text"
      ]
    },
    {
      text: "What does a word frequency analysis show?",
      options: [
        "The length of words in a text",
        "The order of words in a text",
        "How often each word appears in a text",
        "The sentiment of words in a text"
      ]
    },
    {
      text: "In a word cloud visualization, what does the size of a word typically represent?",
      options: [
        "The length of the word",
        "The alphabetical order of the word",
        "The frequency of the word in the text",
        "The sentiment of the word"
      ]
    }
  ],
  answers: [1, 2, 2, 2]
}, "quiz-text-analysis");
</script>
<p>This learning check will help reinforce the key concepts covered in this section on basic text analysis and visualization techniques.</p>
<iframe src="float_traffic.html" width="200px" height="200px" style="border:none; position: fixed; bottom: 10px; right: 10px; z-index: 9999;" scrolling="no">
</iframe>
<iframe src="float_dash.html" width="200px" height="200px" style="border:none; position: fixed; bottom: 10px; left: 10px; z-index: 9999;" scrolling="no">
</iframe>
<div id="quarto-navigation-envelope" class="hidden">
<p><span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-sidebar-title">Book</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar-title">Intro to DH</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-prev">§5 Spinning the Reels 🎰</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-sidebar:/book/index.htmlPreface">Preface</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-sidebar:/book/01-introduction.html§1-Introduction-to-Digital-Humanities">§1 Introduction to Digital Humanities</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-sidebar:/book/02-R.html§2-Getting-Started-With-R">§2 Getting Started With R</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-sidebar:/book/03-dice.html§3-Rolling-the-Dice-🎲">§3 Rolling the Dice 🎲</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-sidebar:/book/04-cards.html§4-Dealing-With-Cards-🃏">§4 Dealing With Cards 🃏</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-sidebar:/book/05-tidyverse.html§5-Spinning-the-Reels-🎰">§5 Spinning the Reels 🎰</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-sidebar:/book/06-qta.html§6-Quantitative-Text-Analysis-Basics-📊">§6 Quantitative Text Analysis Basics 📊</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:Home">Home</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:/index.html">/index.html</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:Syllabus">Syllabus</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:/syllabus.html">/syllabus.html</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:Toybox">Toybox</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:/toolbox.html">/toolbox.html</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:Book">Book</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:/book/index.html">/book/index.html</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-breadcrumbs-§6-Quantitative-Text-Analysis-Basics-📊">§6 Quantitative Text Analysis Basics 📊</span></p>
</div>
<div id="quarto-meta-markdown" class="hidden">
<p><span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-metatitle">§6 Quantitative Text Analysis Basics 📊 – Intro to DH</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-twittercardtitle">§6 Quantitative Text Analysis Basics 📊 – Intro to DH</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-ogcardtitle">§6 Quantitative Text Analysis Basics 📊 – Intro to DH</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-metasitename">Intro to DH</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-twittercarddesc"></span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-ogcardddesc"></span></p>
</div>
</section>
</section>

</main> <!-- /main -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8">
        Content <i class="fab fa-creative-commons"></i> 2024 by <a href="https://mengliu.info">Meng Liu</a> •
        All content licensed under a <i class="fab fa-creative-commons"></i>
        <i class="fab fa-creative-commons-by"></i> <i class="fab fa-creative-commons-nc"></i>
        <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a>
      </div>
      <div class="col-md-4 text-md-end">
        Made with <i class="fab fa-r-project"></i> and <a href="https://quarto.org/">Quarto</a> •
        <a href="https://github.com/mengliuveronica/Intro-to-DH">View source <i class="fab fa-github"></i></a>
      </div>
    </div>
  </div>
</footer>

</body>

</html>
